<!DOCTYPE html>
<html class="singlepage" dir="ltr" lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="dark light" name="color-scheme">
    <title>Index HTML File</title>
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <link as="style" href="/css/fonts.css" rel="preload">
    <script inline src="../js/sync-script.inline.js"></script>
    <link as="script" href="/js/scripts.js" rel="preload">
</head>
<body>
<div class="page-container">
    <header role="banner">
        <div class="header-container">
            <div class="logo-container">
                <a href="#page-main-content" id="skip-content-link">Jump to Main Content</a>
                <a aria-label="Go to Home page" class="logo" href="index.html" title="Home Page">
                    <img alt="Shubho.dev logo" aria-hidden="true" class="site-logo" height="48" src="/images/lightlogo.svg" width="163">
                </a>
            </div>
            <div class="nav-container">
                <nav aria-label="Primary Navigation" class="top-nav max-sm:w-full" role="navigation">
                    <ul role="list">
                        <li><a class="primary-nav-link" href="blog.html" title="Blog">Blog</a></li>
                        <li><a class="primary-nav-link" href="/about/" title="About me">About</a></li>
                    </ul>
                </nav>
                <div class="theme-toggler-holder js-only">
                    <div class="theme-toggler relative">
                        <span class="absolute right-offscreen" id="theme-switch-label">Choose a color theme</span>
                        <button aria-expanded="false" aria-haspopup="listbox" aria-label="Using system default theme" aria-labelledby="theme-switch-label theme-switcher-btn" class="theme-switcher" id="theme-switcher-btn" role="button">
                            <svg aria-hidden="false" class="h-6 w-6 inline-block" fill="none" focusable="false" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            </svg>
                            <span class="inline-block ml-1">System Default</span>
                        </button>
                        <ul aria-labelledby="theme-switch-label" class="theme-switcher-options" role="listbox" tabindex="-1">
                            <li class="theme-switcher-list-item" data-option="light" id="theme-light-option" role="option" tabindex="-1">
                                <div class="theme-switcher-link">
                                    <svg aria-hidden="false" class="h-6 w-6 inline-block" fill="none" focusable="false" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                    </svg>
                                    <span class="inline-block ml-1">Light Theme</span>
                                </div>
                            </li>
                            <li class="theme-switcher-list-item" data-option="dark" id="theme-dark-option" role="option" tabindex="-1">
                                <div class="theme-switcher-link">
                                    <svg aria-hidden="false" class="h-6 w-6 inline-block" fill="none" focusable="false" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                    </svg>
                                    <span class="inline-block ml-1">Dark Theme</span>
                                </div>
                            </li>
                            <li aria-selected="true" class="theme-switcher-list-item !border-b border-site-body-bgcolor" data-option="system" id="theme-system-option" role="option" tabindex="-1">
                                <div class="theme-switcher-link">
                                    <svg aria-hidden="false" class="h-6 w-6 inline-block" fill="none" focusable="false" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                    </svg>
                                    <span class="inline-block ml-1">System Default</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="single-post" tabindex="-1">
        <article aria-labelledby="page-main-content" class="single-post-article">
            <header class="article-header">
                <div aria-hidden="true" class="post-bg-image">
                    <picture><source media="(max-width: 360px)" data-srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-306x120.jpg" srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-306x120.jpg"><source media="(max-width: 499px)" data-srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-425x255.jpg" srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-425x255.jpg"><source media="(max-width: 768px)" data-srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-652x300.jpg" srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-652x300.jpg"><source media="(max-width: 1024px)" data-srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-864x300.jpg" srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-864x300.jpg"><source media="(max-width: 1199px)" data-srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-864x300.jpg" srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-864x300.jpg"><source media="(min-width: 1200px)" data-srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-864x300.jpg" srcset="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-864x300.jpg"><img class="article-image lazyloaded" src="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-425x255.jpg" data-src="https://cdn.shubho.dev/shubho.dev/uploads/2019/07/25171207/javascript-425x255.jpg" alt="JavaScript"></picture>
                </div>
                <div class="article-header-holder">
                    <h1 class="article-title" id="page-main-content">How I created my GatsbyJS blog with WordPress as the backend</h1>
                    <div class="metadata">
                        <time class="datetime" datetime="2021-06-01">August 03, 2019</time>
                        <ul aria-label="Categories and Tags" class="post-tags" role="list">
                            <li><a href="/coding" title="Coding">Coding</a></li>
                            <li><a href="/wordpress" title="WordPress">WordPress</a></li>
                            <li><a href="/gatsby" title="Gatsby">Gatsby</a></li>
                        </ul>
                        <div class="read-time">4 min read</div>
                    </div>
                </div>
            </header>
            <div aria-hidden="true" class="separator"></div>
            <hr class="single-post-top">
            <div class="article-body">
                <div class="article-holder">
                    <p>Async programming in JavaScript was scary for me. The only async paradigm I was comfortable with was jQuery's <code class="language-js">$<span class="token punctuation">.</span>ajax</code>. However, I went full vanilla JavaScript for the past 8 years, and when I started working with NodeJS, I had to learn Promises. I haven't dabbled much with third-party libraries like Bluebird. I have the most experience with native Promise.</p>
                    <p>My main issue with <code class="language-js">Promise</code> (or asynchronous paradigm in general) used to be when I wanted to execute statements after the Promise statement began. It took some time to realise that once a Promise statement fires, there is no way to cancel it. Another issue was Promise chaining. This one was a kicker. My earlier functions with Promises always looked like friends of callback hell. After all these years and working on a couple of big projects, I can safely say I
                        love Promises. Even though async/await is the new fad, I still love Promises.</p>
                    <p>So here is how I use Promises to make my coding life simpler.</p>
                    <h2>Create a Promise skeleton</h2>
                    <p>Whenever I create a new function that returns a Promise, I create the skeleton first. Since the function cannot return anything other than Promise based values, I always wrap all the statements of the function within the Promise.</p>
                    <div class="gatsby-highlight" data-language="js">
                        <div class="syntax-lang-name">js</div>
                        <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// The function body</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                    </div>
                    <p>The above sample function wraps its entire statement within the Promise, returning immediately. You can either <code class="language-js"><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> or <code class="language-js"><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> the output you want from the body. This way, I never make a mistake of
                        not returning a Promise. It also helps me in creating Promise chains. Whenever in a chain, I realise I need a new function, I create the skeleton name it appropriately and finish the main chain. Then I come back one by one and finish the individual functions.</p>
                    <h2>Promise chains - Points to remember</h2>
                    <p>Promise chaining is tricky. If we are not careful, we can have a new type of callback hell. An example:</p>
                    <div class="gatsby-highlight" data-language="js">
                        <div class="syntax-lang-name">js</div>
                        <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">promiseCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">aNewFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">someOtherFunction</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">someOtherValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token comment">// Do something</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>someOtherValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token comment">// Error in inner function</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>err1<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// Error in outer function</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                    </div>
                    <p>In the above sample <code class="language-js"><span class="token function">aFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> and <code class="language-js"><span class="token function">someOtherFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> are two functions returning Promises. If you see carefully, the sequence looks like a callback hell. The inner then and catch the chain, and outer
                        ones are independent. We cannot handle errors in a common catch block, and we need to be careful that the inner functions are always the last line within their outer <code class="language-js"><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> otherwise we can't control the execution flow.</p>
                    <p>A better way with chains:</p>
                    <div class="gatsby-highlight" data-language="js">
                        <div class="syntax-lang-name">js</div>
                        <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">promiseCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">aNewFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">someOtherFunction</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">someOtherValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// Do something</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>someOtherValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// Error in outer function</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                    </div>
                    <p>Returns within the <code class="language-text">then</code> chain can only have three types:</p>
                    <ol>
                        <li><strong>Promise</strong> - A <code class="language-text">then</code> function in a chain can return a Promise. It's result is passed to the next <code class="language-text">then</code>.</li>
                        <li><strong>Scalar Value</strong> - A <code class="language-text">then</code> function in a chain can return a value like a String or a Number. This value is passed to the next <code class="language-text">then</code> as is and the chain can continue.</li>
                        <li><strong>Throw</strong> - A <code class="language-text">then</code> function can <code class="language-text">throw</code> an error, which moves the execution to the catch block.</li>
                    </ol>
                    <p>As long as all your returns within a <code class="language-text">then</code> follow the above three types, you shouldn't have issues following your Promise chain.</p>
                    <p><strong>Note</strong><br>
                        Remember to always <code class="language-js"><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> or <code class="language-js"><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> in the last <code class="language-text">then</code> or <code class="language-text">catch</code> of the chain.</p>
                    <h2>When to create a new Promise function</h2>
                    <p>Within a Promise chain, if there are multiple if-else conditions, and each condition can lead to different Promise results, it is an excellent time to create a new function that returns a Promise. This way, the Promise chain returns a single statement calling the new function.</p>
                    <h2>Handling a scalar value or a Promise function in one step</h2>
                    <p>Assume we have a function which gets the marks attained by a student using his roll number. However, the function either takes a roll number as an input or the name of the student. The marks can be attained from the DB only using the roll number. Here is some pseudo-code.</p>
                    <div class="gatsby-highlight" data-language="js">
                        <div class="syntax-lang-name">js</div>
                        <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">getMarks</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> rollNumberPromise <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'rollNumber'</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rollNumberPromise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>rollNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'studentName'</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rollNumberPromise <span class="token operator">=</span> <span class="token function">getRollNumberFromName</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>studentName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rollNumberPromise<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Nothing worked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    rollNumberPromise
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rollNumber</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">get_marks_from_db</span><span class="token punctuation">(</span>rollNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">marks</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>marks<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getRollNumberFromName</span><span class="token punctuation">(</span><span class="token parameter">studentName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn_to_get_roll_number_from_db</span><span class="token punctuation">(</span>studentName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rollNumber</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>rollNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn_to_get_roll_number_from_db</span><span class="token punctuation">(</span><span class="token parameter">studentName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// some code</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">get_marks_from_db</span><span class="token punctuation">(</span><span class="token parameter">rollNumber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// some code</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                    </div>
                    <p><code class="language-js"><span class="token function">getMarks</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></code> takes an Object as an input. We create a local variable <code class="language-text">rollNumberPromise</code>. If the rollNumber is already present, we save the value in the variable using <code class="language-js">Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span></code>. This creates a Promise which resolves when called with the value. If student’s name is sent, then we save the call to the function <code class="language-js"><span class="token function">getRollNumberFromName</span><span class="token punctuation">(</span>studentName<span class="token punctuation">)</span></code> to the local variable. Calling <code class="language-js">rollNumberPromise<span class="token punctuation">.</span><span
                            class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> returns a rollNumber whether it is received from the DB or sent directly as input to the function. Using it this way ensures that <code class="language-js"><span class="token function">getMarks</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> has a single Promise chain, rather than an if-else condition based on whether the
                        input passed was a number or a name.</p>
                    <h2>Invoke a Promise at the end</h2>
                    <p>As mentioned before, once a Promise, once invoked, cannot be cancelled. Any statements which do not depend on the Promise output and which can be carried out independently without an async call should complete before you start a Promise chain in your function. Once a Promise chain begins, any subsequent steps must be within the <code class="language-text">then</code> chain. The only exception to this is when you do not care of the Promise value, and you want the Promise to execute in the
                        background while your primary function keeps running.</p>
                    <h2>Conclusion</h2>
                    <p>Promises are difficult. However, with practice and following some rules, it makes working with them a charm. I strictly follow the above rules, and I never go wrong with Promises these days. Find out what you are comfortable with and create your own rules.</p>
                </div>
            </div>
            <hr>
            <footer class="article-footer">
                <nav aria-label="Pagination links" class="pagination" role="navigation">
                    <a class="previous" data-direction="backwards" href="/prev">
                        <svg aria-hidden="true" class="h-4 w-4" fill="none" focusable="false" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                        </svg>
                        <span>Previous post</span></a>
                    <a class="next" data-direction="forwards" href="/next"><span>Next post</span>
                        <svg aria-hidden="true" class="h-4 w-4" fill="none" focusable="false" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                        </svg>
                    </a>
                </nav>
            </footer>
        </article>
    </main>

    <footer class="site-footer" role="contentinfo">
        <div class="footer-holder">&copy; Copyright Shubhojyoti Bhattacharya 2019 - 2021.<br><a class="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Attribution-NonCommercial-ShareAlike</a></div>
    </footer>
</div>

<div aria-hidden="true" class="mask root-hidden"></div>
<link href="/css/fonts.css" rel="stylesheet" type="text/css">
<script defer src="/js/scripts.js"></script>
</body>
</html>
